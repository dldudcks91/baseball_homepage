
<div class="preview-wrap" style="opacity:0">

    <div class= "preview-box" id="preview-team">
        <div class="box-title">

        </div>
        <div class="box-contents">
            <div class="dist-box" id="team-dist-box">

                <ul>
                    <li class="dist-card dist-card-away dist-team" id="team-dist-away">
                        <div id="recent-title-away" class="recent-title">
                            <div class="recent-title-word"><h> {{away_dic.name}} - 최근7경기 </h></div>

                            <hr style="position:absolute;width:300px;top:24px;">
                        </div>

                        <div class="emb-back"><img id="emb-back-away" src= "{{away_dic.url}}" alt= {{away_dic.name}}></div>
                        <div>
                            <ul>
                                {% for set in away_set %}
                                    <li>
                                        <div class="recent-games">
                                            <div>{{set.date}}</div>
                                            <div>{{set.stadium}}</div>
                                            <div><img class='pre-emb' src= "{{set.away_url}}" alt= "{{set.away_name}}" ></div>
                                            <div class="recent-run">{{set.away_run}}</div>
                                            <div>:</div>
                                            <div class="recent-run">{{set.home_run}}</div>
                                            <div><img class='pre-emb' src= "{{set.home_url}}" alt= "{{set.home_name}}"></div>
                                            <div class="recent-result" value="{{set.result}}">{{set.result}}</div>
                                        </div>
                                    </li>
                                {% endfor %}
                            </ul>
                        </div>

                    </li>
                    <li class="game-title-box">
                        <div id="game-title-away" class="game-title">
                            <div class="emb-game-title"> <img id="emb-title-away" src= "{{away_dic.url}}" alt= {{away_dic.name}}></div>
                            <div class="game-title-info">
                                <div>{{away_dic.rank}}</div>
                                <div>{{away_dic.win_rate}}</div>
                                <div>{{away_dic.home_away}}</div>
                                <div>{{away_dic.rela}}</div>
                                <div>{{away_dic.sp}}</div>

                            </div>
                        </div>
                        <div id="game-title-middle" class="game-title">

                            <div id="game-title-vs" ><b>vs</b></div>
                            <div class="game-title-list game-title-info">
                                <div><b>순위</b></div>
                                <div><b>승률</b></div>
                                <div><b>홈/원정</b></div>
                                <div><b>상대전적</b></div>
                                <div><b>선발투수</b></div>

                            </div>
                        </div>
                        <div id="game-title-home" class="game-title">
                            <div class="emb-game-title"> <img id="emb-title-home" src= "{{home_dic.url}}" alt= {{home_dic.name}}></div>
                            <div class="game-title-info">
                                <div>{{home_dic.rank}}</div>
                                <div>{{home_dic.win_rate}}</div>
                                <div>{{home_dic.home_away}}</div>
                                <div>{{home_dic.rela}}</div>
                                <div>{{home_dic.sp}}</div>
                            </div>
                        </div>


                    </li>
                    <li class="dist-card dist-card-home dist-team" id="team-dist-home">
                        <div id="recent-title-home" class="recent-title">

                            <div class="recent-title-word"><h> {{home_dic.name}} - 최근7경기 </h></div>

                            <hr style="position:absolute;width:300px;top:24px;right:10px;">
                        </div>

                        <div class="emb-back"><img class='pre-emb' id="emb-back-home" src= "{{home_dic.url}}" alt= {{home_dic.name}}></div>
                        <div>
                            <ul>
                                {% for set in home_set %}
                                <li>
                                    <div class="recent-games">
                                        <div>{{set.date}}</div>
                                        <div>{{set.stadium}}</div>
                                        <div><img class='pre-emb' src= "{{set.away_url}}" alt= "{{set.away_name}}" ></div>
                                        <div class="recent-run">{{set.away_run}}</div>
                                        <div>:</div>
                                        <div class="recent-run">{{set.home_run}}</div>
                                        <div><img class='pre-emb' src= "{{set.home_url}}" alt= "{{set.home_name}}"></div>
                                        <div class="recent-result" value="{{set.result}}">{{set.result}}</div>
                                    </div>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>

                    </li>
                </ul>
            </div>
        </div>
    </div>
    <hr>

    <div class= "preview-box" id="preview-rate">
        <div class="box-title"></div>
        <div class="dist-box" id="rate-dist-box">
            <ul>
                <li class="dist-card dist-card-away" id="run-rate-away"></li>
                <li class="game-title-box" id="game-rate-box">

                    <div class="game-rate-title"><b>승부예측</b>

                    </div>
                    <div class="game-rate-odds">
                        <div class="game-rate game-rate-away">
                            <div class="rate-graph rate-graph-away">
                                <strong class="rate-bar rate-bar-away" id="rate-away-model1" ></strong>
                            </div>
                            <div class="rate-graph">
                                <strong class="rate-bar rate-bar-away" id="rate-away-model2" ></strong>
                            </div>
                            <div class="rate-graph">
                                <strong class="rate-bar rate-bar-away" id="rate-away-model3" ></strong>
                            </div>
                        </div>
                            <div class="game-rate game-rate-middle">
                                <div class="rate-info">-</div>
                                <div class="rate-info">-</div>
                                <div class="rate-info">-</div>

                            </div>
                        <div class="game-rate game-rate-home">

                            <div class="rate-graph">
                                <strong class="rate-bar rate-bar-home" id="rate-home-model1" ></strong>
                                <span class="add-info" role="button">
                                    <img class='add-info-img' src="/static/images/button/add_button.png" >
                                    <div class="add-pop-layer layer-rate hidden" id="layer-rate-model1">

                                    </div>
                                </span>

                            </div>
                            <div class="rate-graph">
                                <strong class="rate-bar rate-bar-home" id="rate-home-model2" ></strong>
                                <span class="add-info" role="button">
                                    <img class='add-info-img' src="/static/images/button/add_button.png" >
                                    <div class="add-pop-layer layer-rate hidden" id="layer-rate-model2"></div>
                                </span>
                            </div>
                            <div class="rate-graph">
                                <strong class="rate-bar rate-bar-home" id="rate-home-model3" ></strong>
                                <span class="add-info" role="button">
                                    <img class='add-info-img' src="/static/images/button/add_button.png" >
                                    <div class="add-pop-layer layer-rate hidden" id="layer-rate-model3"></div>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="game-rate-title"><b>점수예측</b></div>
                    <div class="game-rate-uo">
                        <div class="game-rate game-rate-away">
                            <div class="rate-graph">
                                <strong class="rate-bar rate-bar-away" id="uo-away-model2" ></strong>
                            </div>
                            <div class="rate-graph">
                                <strong class="rate-bar rate-bar-away" id="uo-away-model3" ></strong>
                            </div>

                        </div>
                            <div class="game-rate game-rate-middle">
                                <div class="rate-info" id="uo-info-model2">-</div>
                                <div class="rate-info" id="uo-info-model3">-</div>
                            </div>
                        <div class="game-rate game-rate-home">

                            <div class="rate-graph">
                                <strong class="rate-bar rate-bar-home" id="uo-home-model2" ></strong>
                                <span class="add-info" role="button">
                                    <img class='add-info-img' src="/static/images/button/add_button.png" >
                                    <div class="add-pop-layer layer-uo hidden" id="layer-uo-model2"></div>
                                </span>
                            </div>
                            <div class="rate-graph">
                                <strong class="rate-bar rate-bar-home" id="uo-home-model3" ></strong>
                                <span class="add-info" role="button">
                                    <img class='add-info-img' src="/static/images/button/add_button.png" >
                                    <div class="add-pop-layer  layer-uo hidden" id="layer-uo-model3"></div>
                                </span>
                            </div>

                        </div>
                    </div>

                </li>
                <li class="dist-card dist-card-home" id="run-rate-home"></li>
            </ul>

        </div>
        <div class="box-contents">
        </div>
    </div>
    <hr>

    <div class= "preview-box" id="preview-pitcher">
        <div class="box-title">

        </div>
        <div class="box-contents">
            <div class="dist-box" id="sp-dist-box">

                <ul>
                    <li class="dist-card dist-card-away dist-sp" id="sp-dist-away">
                        <div id="sp-title-away" class="sp-title"><b>{{away_dic.sp}}</b></div>
                        <hr style="position:absolute;width:240px;top:6px;">

                        <ul>
                            <li><b>- 최근등판기록</b></li>
                            {% for set in away_sp_set %}
                            <li>
                                <div class="recent-sp">
                                    <span>vs</span>
                                    <span>{{set.date}}</span>
                                    <span><img class='pre-sp-emb' src= "{{set.foe_url}}" alt= "{{set.foe_name}}" ></span>

                                    <span class="recent-run">{{set.ip}}이닝</span>
                                    <span class="recent-run">{{set.r}}실점</span>
                                </div>
                            </li>
                            {% endfor %}
                        </ul>

                    </li>
                    <li class="dist-graph" id="sp-dist-graph"></li>
                    <li class="dist-card dist-card-home dist-sp" id="sp-dist-home">
                        <div id="sp-title-home" class="sp-title"><b>{{home_dic.sp}}</b></div>
                        <hr style="position:absolute;width:240px;top:6px;right:0px">

                        <ul>
                            <li><b>- 최근등판기록</b></li>
                            {% for set in home_sp_set %}
                            <li>
                                <div class="recent-sp">
                                    <span>vs</span>
                                    <span>{{set.date}}</span>
                                    <span><img class='pre-sp-emb' src= "{{set.foe_url}}" alt= "{{set.foe_name}}" ></span>

                                    <span class="recent-run">{{set.ip}}이닝</span>
                                    <span class="recent-run">{{set.r}}실점</span>
                                </div>
                            </li>
                            {% endfor %}
                        </ul>

                    </li>
                </ul>
            </div>
        </div>
    </div>
    <hr>

    <div class= "preview-box" id="preview-rp" style="opacity:0">
        <div class="box-title">

        </div>
        <div class="box-contents">
            <div class="run-box" id="rp-graph-box">
                <div class="run-graph run-graph-away" id="rp-graph-away"></div>
                <div class="run-graph run-graph-home" id="rp-graph-home"></div>

            </div>


        </div>
    </div>
    <hr>

    <!--
    <div class= "preview-box" id="preview-run-dist" style="opacity:0">

        <div class="box-title">

        </div>

        <div class="box-contents">
            <div class="dist-box" id="run-dist-box" >

                <ul>
                    <li class="dist-card dist-card-away" id="run-dist-away">{{away_dic.name}}</li>
                    <li class="dist-graph" id="run-dist-graph"></li>
                    <li class="dist-card dist-card-home" id="run-dist-home">{{home_dic.name}}</li>
                </ul>
            </div>
        </div>
    </div>
    -->
</div>


<script type="text/javascript">
    /* 기본정보 불러오는 java-script*/

    $(document).ready(function() {
        $('.preview-wrap').fadeTo(2000,1)
        SpPicture()


    });

    DateStr()
    get_recent_color()


    function DateStr(){
        var date = "{{date}}"
        var year = date.substring(0,4)
        var month = date.substring(4,6)
        var day = date.substring(6,8)
        var date_str = year + '년 ' + month + "월 " + day + "일 " + "{{stadium}}"
        $('#title-date').append(date_str)

    }

    function SpPicture(){

        var home_name = "{{home_dic.name}}"
        var home_sp = "{{home_dic.sp}}"

        var away_name = "{{away_dic.name}}"
        var away_sp = "{{away_dic.sp}}"

        function getHtml(team,name,home_away){
            var team = team
            var name = name
            var html = '<div><img class="img-sp"' +' id="img-sp-' + home_away +'"'+' src="/static/images/pitcher_300x400/' + team + '_' + name +'.jpg"' + 'onerror="this.src=' + "'/static/images/pitcher_300x400/기본사진.jpg'" +'"' +'></div>'

            return html
        }

        $('#sp-dist-away').append(getHtml(away_name,away_sp,"away"))

        $('#sp-dist-home').append(getHtml(home_name,home_sp,"home"))

    }

    function get_recent_color(){
        $('div[value=승]').attr("style","color: rgb(255,0,0);")
        $('div[value=패]').attr("style","color: rgb(70,70,70);")
        $('div[value=무]').attr("style","color: green;")

    }

</script>

<script type="text/javascript">
    /* 승률정보 불러오는 java-script */
    $(document).ready(function() {

        GameRateGraph()
        ToToRate()

    });

    var last_pop = 0
    var pop_fasten = 0
    $('.layer-rate').append('<table class="tbl-pop table"><thead><tr><th>Date</th><th>Up/Down</th><th>Away</th><th>Home</th><th>Up/Down</th><th>Time</th></tr></thead></table>')
    $('.layer-uo').append('<table class="tbl-pop table"><thead><tr><th>Date</th><th>Under</th><th>Standard</th><th>Over</th><th>Time</th></tr></thead></table>')

    $('.add-info').mouseover(function(){
        if (pop_fasten == 1){
            return
        }
        $(this).children('div').removeClass('hidden')
        })
    $('.add-info').mouseleave(function(){
        if (pop_fasten == 1){
            return
        }
        $(this).children('div').addClass('hidden')
    })




    $('.add-info').on('click',function(){

        $('.add-pop-layer').addClass('hidden')
        if (last_pop == $(this).children('div').attr('id')){
            last_pop = 0
        }
        else {
            $(this).children('div').removeClass('hidden')
            last_pop = $(this).children('div').attr('id')
        }
        pop_fasten = 1

    })

    $(document).mouseup(function (e){
      var LayerPopup = $(".add-pop-layer");
      if(LayerPopup.has(e.target).length === 0){
        LayerPopup.addClass("hidden");
        last_pop = 0
      }
      pop_fasten = 0
    });



    function GameRateGraph(){
        var set_url = 'run_graph/'  + {{date}} +'/' + {{today_game_num}};
        $.ajax({
            url: set_url,
            dataType:'json',
            success: function(data){
                setTimeout(function() {
                    $('.preview-box').fadeTo(500,1)
                    ChartRunRateAway(data,'run-rate-away')
                    ChartRunRateHome(data,'run-rate-home')
                }, 500);


            },
            error:function(request,status,error){
                        alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
            }


        });
       
    }

    function ToToRate(){
        var toto_list = "{{toto_list}}".replace(/&#x27;/g,"\"");
        var toto_json = JSON.parse(toto_list)

        var odds_model1 = []
        var odds_model2 = []
        var odds_model3 = []

        var uo_model2 = []
        var uo_model3 = []
        for(var i = 0 in toto_json){
            var toto = toto_json[i]
            if(toto.site_name == 'livescore'){
                odds_model1.push(toto)

            }
            else if (toto.site_name =='field-one'){
                if (toto.win_type == 1){
                    odds_model2.push(toto)
                    }
                else if (toto.win_type ==3){
                    uo_model2.push(toto)

                    }
            }
            else if (toto.site_name =='lyc'){
               if (toto.win_type == 1){
                    odds_model3.push(toto)
                    }
               else if (toto.win_type ==3){
                    uo_model3.push(toto)

                    }
            }


        }
        function getModelRate(model,win_type,away_address,home_address,model_address){
            model_length = model.length
            if (model_length == 0){
                return
            }

            last = model[model_length-1]

            if (last.away_odds == 0 ){
                away = ""
                $(away_address).attr("style","width:" + 0)
            }
            else {
                away = Math.round(last.away_odds * 1000) / 10 + "%"
                $(away_address).attr("style","width:" + away)
            }

            $(away_address).text(away)
            if (last.home_odds == 0 ){
                home = ""
                $(home_address).attr("style","width:" + 0)
            }
            else {
                home = Math.round(last.home_odds * 1000) / 10 + "%"
                $(home_address).attr("style","width:" + home)
            }

            $(home_address).text(home)

            if (win_type == 3){
                $(model_address).text(last.handicap)
            }
        }
        getModelRate(odds_model1,1,'#rate-away-model1','#rate-home-model1',"")
        getModelRate(odds_model2,1,'#rate-away-model2','#rate-home-model2',"")
        getModelRate(odds_model3,1,'#rate-away-model3','#rate-home-model3',"")


        getModelRate(uo_model2,3,'#uo-away-model2','#uo-home-model2','#uo-info-model2')
        getModelRate(uo_model3,3,'#uo-away-model3','#uo-home-model3','#uo-info-model3')

        function getPopRate(model, win_type, pop_address){

            model_length = model.length
            if (model_length == 0){
                return
            }
            $(pop_address).children('table').append('<tbody></tbody>')
            max_length = 5
            start_i = 0
            if (model_length > max_length){
                start_i = model_length-max_length
            }
            last_away = model[start_i].away_odds
            last_home = model[start_i].home_odds

            function getArrow(now,last){
                var result = ''
                if (now > last) {
                    result = '<td>'+ '<img src="/static/images/button/up_arrow_red.gif" style="width:24px">' +'</td>'
                }
                else if (now < last) {
                    result = '<td>'+ '<img src="/static/images/button/down_arrow_blue.gif" style="width:24px">' +'</td>'
                }
                else {
                    result = '<td>'+ '-' +'</td>'
                }
                return result
            }


            for (var i = start_i; i < model_length ;i++){
                var m = model[i]

                this_body = $(pop_address).children('table').children('tbody')

                var insert_str = ''
                insert_str += '<tr>'

                insert_str+= '<td>'+ m.date +'</td>'


                if (win_type == 1){
                    insert_str+=getArrow(m.away_odds,last_away)
                    last_away = m.away_odds

                    away = Math.round(m.away_odds * 1000) / 10 + "%"
                    insert_str+= '<td>'+ away +'</td>'

                    home = Math.round(m.home_odds * 1000) / 10 + "%"
                    insert_str+= '<td>'+ home +'</td>'


                    insert_str+=getArrow(m.home_odds,last_home)
                    last_home = m.home_odds
                }

                else if(win_type == 3){
                    under = Math.round(m.away_odds *1000) / 10 + "%"
                    insert_str+= '<td>'+ under +'</td>'

                    standard = m.handicap
                    insert_str+= '<td>'+ standard +'</td>'

                    over = Math.round(m.home_odds *1000) / 10 + "%"
                    insert_str+= '<td>'+ over +'</td>'

                }

                insert_str+= '<td>'+ m.craw_time +'</td>'
                this_body.append(insert_str)
            }

        }
        getPopRate(odds_model1, 1, '#layer-rate-model1')
        getPopRate(odds_model2, 1, '#layer-rate-model2')
        getPopRate(odds_model3, 1, '#layer-rate-model3')

        getPopRate(uo_model2,3, '#layer-uo-model2')
        getPopRate(uo_model3,3, '#layer-uo-model3')
    }


    function ChartRunRateAway(data, id_index){
        
        Highcharts.chart( id_index, {

            chart: {
                type:'bar'
            },

            title: {
                text: data.away_dic.name + ' 득점분포'
            },
            xAxis: {
                title:{
                    text:null
                },

                reversed: false,

                categories: ['0-1','2-3','4-5','6-7','8-9','10-11','12-13','14+'],
                accessibility: {
                    description: data.away_dic.name
                },

            },

            yAxis: {

                    title: {
                    text: null
                    },
                    labels: {
                        formatter: function () {
                            return Math.abs(this.value) + '%';
                        }
                    },
                    min: 0,
                    max: 50

                    },


            plotOptions: {
                series: {
                    stacking: 'normal'
                }
            },

            tooltip: {
                formatter: function () {
                    return '<b>' + this.series.name + ', run ' + this.point.category + '</b><br/>' +
                        'Population: ' + Highcharts.numberFormat(Math.abs(this.point.y), 1) + '%';
                }
            },
            series: [{
                name: data.away_dic.name,
                data: data.away_dic.dist,

            }],
            credits: {
                enabled: false
            },
            legend:{
                enabled: false
            }

        });

    }
    function ChartRunRateHome(data, id_index){
        var home_dist_list = data.home_dic.dist
        for(var i in home_dist_list){
            home_dist_list[i] = -home_dist_list[i]
        }
        Highcharts.chart(id_index, {

            chart: {
                type:'bar'
            },

            title: {
                text: data.home_dic.name + ' 득점분포'
            },
            xAxis: {
                title:{
                    text:null
                },

                reversed: false,
                opposite: true,
                categories: ['0-1','2-3','4-5','6-7','8-9','10-11','12-13','14+'],
                accessibility: {
                    description: data.home_dic.name
                },

            },

            yAxis: {

                    title: {
                        text: null
                    },
                    labels: {
                        formatter: function () {
                            return Math.abs(this.value) + '%';
                        }
                    },
                    min: -50,
                    max: 0 
                    
                    },

                        

            plotOptions: {
                series: {
                    stacking: 'normal'
                }
            },

            tooltip: {
                formatter: function () {
                    return '<b>' + this.series.name + ', run ' + this.point.category + '</b><br/>' +
                        'Population: ' + Highcharts.numberFormat(Math.abs(this.point.y), 1) + '%';
                }
            },
            series: [{
                name: data.home_dic.name,
                data: home_dist_list,
                
                color: 'rgb(67,67,72)',
                /*
                dataLabels: {
                            enabled: true,

                            color: '#FFFFFF',
                            align: 'left',
                            formatter: function() {
                                return Math.abs(this.point.y).toFixed(1) // one decimal
                            },
                            style: {
                                fontSize: '13px',
                            }
                        }
                */
            }]
            ,
            credits: {
                enabled: false
            },
            legend:{
                enabled: false
            }
        });

    }
    

    

</script>
<script type="text/javascript">
    /* 선발투수기록 불러오는 java-script*/

    $(document).ready(function() {

        getSpGraph();


    });

    function getSpGraph(){
       var set_url = 'sp_graph/' + {{date}} +'/' + {{today_game_num}};

        $.ajax({
            url: set_url,
            dataType:'json',
            success: function(data){
                Highcharts.chart('sp-dist-graph', {

                    chart: {
                        type:'bar'
                    },

                    title: {
                        text: "선발투수비교"


                    },

                    subtitle: {
                        text: null
                    },



                    xAxis: [{
                        opposite: true,
                        reversed: false,

                        categories: ['득점지원','불펜실점','ERA','FIP','평균이닝','10경기당 QS','선발등판'],
                        labels: {
                            step: 1,

                            style:{ fontSize:'13px'}

                        },
                        accessibility: {
                            description: data.away_dic.sp
                        },


                    }, {

                        reversed: false,

                        categories: ['득점지원','불펜실점','ERA','FIP','평균이닝','10경기당 QS','선발등판'],

                        linkedTo: 0,
                        labels: {
                            step: 1,

                            style:{ fontSize:'13px'}
                        },
                        accessibility: {
                            description: data.home_dic.sp
                        },


                    }],

                    yAxis: {

                        title: {
                        text: null
                        },
                        labels: {
                            formatter: function () {
                                return Math.abs(this.value);
                            }
                        },
                        min: -10,
                        max: 10

                    },


                    plotOptions: {
                        series: {
                            stacking: 'normal'
                        }
                    },

                    tooltip: {
                        formatter: function () {
                            return '<b>' + this.point.category +': ' + Highcharts.numberFormat(Math.abs(this.point.y), 1) + '</b>';

                        }
                    },
                    series: [{
                        name: data.away_dic.sp,
                        data: [-data.away_dic.run,-data.away_dic.rp,-data.away_dic.era,-data.away_dic.fip,-data.away_dic.inn,-data.away_dic.qs,-data.away_dic.count],

                        dataLabels: {
                            enabled: true,

                            color: '#FFFFFF',
                            align: 'left',
                            formatter: function() {
                                return Math.abs(this.point.y).toFixed(1) // one decimal
                            },
                            style: {
                                fontSize: '15px',
                            }
                        }
                    },
                    {
                        name: data.home_dic.sp,
                        data: [data.home_dic.run,data.home_dic.rp,data.home_dic.era,data.home_dic.fip,data.home_dic.inn,data.home_dic.qs,data.home_dic.count],
                        dataLabels: {
                            enabled: true,

                            color: '#FFFFFF',
                            align: 'right',
                            formatter: function() {
                                return Math.abs(this.point.y).toFixed(1) // one decimal
                            },
                            style: {
                                fontSize: '15px',
                            }
                        }
                    }],
                    credits: {
                        enabled: false
                    },
                });
            },
            error:function(request,status,error){
                        alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
            }
        });
    }



</script>


<script type="text/javascript">
    /* 타자+불펜기록 불러오는 java-script*/

    $(document).ready(function() {


        getRunGraph();


    });

    function getRunGraph(){
        var set_url = 'run_graph/'  + {{date}} +'/' + {{today_game_num}};
        $.ajax({
            url: set_url,
            dataType:'json',
            success: function(data){
                setTimeout(function() {
                    $('.preview-box').fadeTo(1000,1)
                    ChartBt(data,'rp-graph-away')
                    ChartRp(data,'rp-graph-home')
                    //ChartRunDist(data,'run-dist-graph')
                }, 1000);


            },
            error:function(request,status,error){
                        alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
            }


        });
    }

    function ChartRunDist(data,id_index){
        var away_dist_list = data.away_dic.dist
        for(var i in away_dist_list){
            away_dist_list[i] = -away_dist_list[i]
        }

        Highcharts.chart(id_index, {

            chart: {
                type:'bar'
            },

            title: {
                text: '득점분포도'
            },

            subtitle: {
                text: null
            },

            xAxis: [{
                reversed: false,

                categories: ['0-1','2-3','4-5','6-7','8-9','10-11','12-13','14+'],
                labels: {
                    step: 1
                },
                accessibility: {
                    description: data.away_dic.name
                },


            }, {
                opposite: true,
                reversed: false,

                categories: ['0-1','2-3','4-5','6-7','8-9','10-11','12-13','14+'],

                linkedTo: 0,
                labels: {
                    step: 1
                },
                accessibility: {
                    description: data.home_dic.name
                },


            }],

            yAxis: {

                title: {
                text: null
                },
                labels: {
                    formatter: function () {
                        return Math.abs(this.value) + '%';
                    }
                },
                min: -50,
                max: 50

            },


            plotOptions: {
                series: {
                    stacking: 'normal'
                }
            },

            tooltip: {
                formatter: function () {
                    return '<b>' + this.series.name + ', run ' + this.point.category + '</b><br/>' +
                        'Population: ' + Highcharts.numberFormat(Math.abs(this.point.y), 1) + '%';
                }
            },
            series: [{
                name: data.away_dic.name,
                data: away_dist_list
            },
            {
                name: data.home_dic.name,
                data: data.home_dic.dist
            }],
            credits: {
                enabled: false
            },
        });
    }
    function ChartRp(data,id_index){
        Highcharts.chart(id_index, {
            chart: {
                width: 600,
                height: 400
            },

            title: {
                text: '  불펜실점추이 - 최근 20경기 '
            },

            subtitle: {
                text: null
            },

            yAxis: {

                title: {
                    text: 'Mean of FIP'

                },
                min: 0,
                max: 10,
            },

            series: [{
                name: data.away_dic.name,
                data: data.away_dic.f20
            },
            {
                name: data.home_dic.name,
                data: data.home_dic.f20
            }],
            credits: {
                enabled: false
            },
        });
    }
    function ChartBt(data,id_index){
        Highcharts.chart(id_index, {
            chart: {
                width: 600,
                height: 400
            },

            title: {
                text: '  타선득점추이 - 최근 20경기 '
            },

            subtitle: {
                text: null
            },

            yAxis: {

                title: {
                    text: 'Mean of FIP'

                },
                min: 0,
                max: 10,
            },

            series: [{
                name: data.away_dic.name,
                data: data.away_dic.r20
            },
            {
                name: data.home_dic.name,
                data: data.home_dic.r20
            }],
            credits: {
                enabled: false
            },
            
        });
    }

</script>

